import{o as L,c as A,F as O,a as h,b}from"./vendor.7e1eed1e.js";const w=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}};w();const x="modulepreload",u={},M="/",d=function(t,s){return!s||s.length===0?t():Promise.all(s.map(e=>{if(e=`${M}${e}`,e in u)return;u[e]=!0;const i=e.endsWith(".css"),n=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");if(r.rel=i?"stylesheet":x,i||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),i)return new Promise((F,_)=>{r.addEventListener("load",F),r.addEventListener("error",_)})})).then(()=>t())};var S=(o,t)=>{const s=o.__vccOpts||o;for(const[e,i]of t)s[e]=i;return s};const E={},j=h("canvas",{id:"objects"},null,-1),R=h("canvas",{id:"fields"},null,-1);function I(o,t){return L(),A(O,null,[j,R],64)}var P=S(E,[["render",I]]);const f={},a={},p={G:667259e-16,c:299792458,k:8987551787368176e-6,e:1602176634e-28};function k(o){f[o.id]=o}function m(){return f}function C(o){a[o.id]=o}function N(o){return a[o]===void 0?!1:(delete a[o],!0)}function y(){return a}class c{constructor(t,s,e){this.name=t,this.type=s,this.magnitude=e,this.id=c.idCounter++,C(this)}destroy(){N(this.id)}}c.idCounter=0;class q extends c{constructor(t,s,e){super(t,s,e)}}class v extends c{constructor(t,s,e){super(t,s,e)}}class g extends v{constructor(t,s){super(t,"gravity");this.centralObject=s,this.mass=s.mass,this.center=s.position}calculateForceGravity(t){if(t===this.centralObject)return[0,0];const s=[0,0],e=t.position[0]-this.center[0],i=t.position[1]-this.center[1],n=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));return s[0]=-(this.mass*t.mass*p.G)/Math.pow(n,2)*e/n,s[1]=-(this.mass*t.mass*p.G)/Math.pow(n,2)*i/n,s}}class G{constructor(){this.objectList={},this.fieldList={},this.objectList=m(),this.fieldList=y()}analyzeAll(t){const s=Object.values(this.objectList);for(const e of s)e.calculateAcceleration(t)}}class z{constructor(t){this.loopFuncs=[],this.status="running",this.speed=1,this.config=t,this.run(),this.analyzer=new G}run(){this.createLoop(),this.status="running"}stop(){this.status="stopped"}pause(){this.status="paused"}resume(){this.status="running"}createLoop(){let t=0,s=0,e=this;this.loop=i=>{if(e.status==="paused")return requestAnimationFrame(this.loop);if(e.status==="running"){let n=i-s;s=i,t++;for(let r=0;r<this.config.refreshRate;r++)e.update();for(let r of e.loopFuncs)r(t,n);requestAnimationFrame(this.loop)}else if(e.status==="stopped"){this.loop=void 0;return}},requestAnimationFrame(this.loop)}update(){this.analyzer.analyzeAll(this.config.refreshRate),this.moveAllObjects()}addLoop(t){this.loopFuncs.push(t)}removeLoop(t){this.loopFuncs.splice(this.loopFuncs.indexOf(t),1)}moveAllObjects(){const t=Object.values(m());for(const s of t)s.move(this.config.refreshRate*this.speed)}setSpeed(t){this.speed=t}}class T extends q{constructor(t,s,e){super(t,"electric",s);this.setShape(e)}isInField(t){return this.shape.isInShape(t.position)}calculateForceElectic(t){if(!this.isInField(t))return[0,0];const s=[0,0],e=this.magnitude[0]*t.charge,i=this.magnitude[1]*t.charge;return s[0]=e,s[1]=i,s}setShape(t){this.shape=t}}class l{constructor(t,s,e){this.mass=0,this.velocity=[0,0],this.acceleration=[0,0],this.forces=[],this.position=[0,0],this.charge=0,this.name=t,this.description=s,this.id=l.idCounter++,this.gravityField=new g(this.name,this),k(this),this.setMass(e)}setPosition(t=this.position[0],s=this.position[1]){this.position[0]=t,this.position[1]=s}setShape(t){this.shape=t}setMass(t){this.mass=t,this.gravityField.mass=t}addForce(t){this.forces.push(t)}removeForce(t){this.forces.splice(this.forces.indexOf(t),1)}addAcceleration(t,s){this.acceleration[0]+=t,this.acceleration[1]+=s}isInField(t){if(t instanceof v)return!0}move(t=1){this.position[0]+=this.velocity[0]/t,this.position[1]+=this.velocity[1]/t}setVelocity(t,s){this.velocity[0]=t,this.velocity[1]=s}setCharge(t){this.charge=t}calculateForce(){const t=[0,0],s=Object.values(y());for(const e of s)if(e instanceof g){const i=e.calculateForceGravity(this);t[0]+=i[0],t[1]+=i[1]}else if(e instanceof T){const i=e.calculateForceElectic(this);t[0]+=i[0],t[1]+=i[1]}return t}calculateAcceleration(t=1){if(!this.mass)return;const s=this.calculateForce(),e=[0,0];return e[0]=s[0]/this.mass,e[1]=s[1]/this.mass,this.acceleration=e,this.velocity[0]+=e[0]/t,this.velocity[1]+=e[1]/t,e}}l.idCounter=0;class B extends l{constructor(t,s,e,i){super(t,s,i);this.radius=e}}class V{constructor(t,s,e,i){this.id=t,this.type=s,this.center=e,this.setNode(i)}setNode(t){this.node=t,this.node.push(t[0])}setRadius(t){this.radius=t}isInShape(t){if(this.type==="circle")return Math.pow(t[0]-this.center[0],2)+Math.pow(t[1]-this.center[1],2)<=Math.pow(this.radius,2);if(this.type==="polygon"){let s=0;for(let e=0;e<this.node.length-1;e++){const i=this.node[e][1],n=this.node[e+1][1];t[1]>=Math.min(i,n)&&t[1]<=Math.max(i,n)&&t[0]<=Math.max(this.node[e][0],this.node[e+1][0])&&s++}return s%2==1}}}const D=new z({refreshRate:10});d(()=>import("./utils.905357d2.js"),["assets/utils.905357d2.js","assets/draw.2738d88b.js","assets/vendor.7e1eed1e.js"]).then(o=>window.cnb=o);b(P).mount("#app");d(()=>import("./draw.2738d88b.js"),["assets/draw.2738d88b.js","assets/vendor.7e1eed1e.js"]);export{B as R,V as S,T as U,D as a,y as b,m as g};
